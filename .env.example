# =============================================================================
# Docker Containerization Configuration
# =============================================================================
# This file contains environment variables for both local development and
# Docker container deployment. Docker Compose will automatically load these
# variables when you run: docker-compose up
#
# Copy this file to .env and update with your actual values:
#   cp .env.example .env
# =============================================================================

# =============================================================================
# PostgreSQL Database Configuration (for Docker)
# =============================================================================
# These are used by the postgres container and database initialization
POSTGRES_USER=postgres
POSTGRES_PASSWORD=secret
POSTGRES_DB=postgres
POSTGRES_PORT=5432

# =============================================================================
# Redis Configuration (for Docker)
# =============================================================================
REDIS_PORT=6379

# =============================================================================
# Nginx Proxy Configuration (for Docker)
# =============================================================================
# Ports exposed by the nginx proxy container
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# =============================================================================
# WhatsApp Business API Configuration
# =============================================================================
# Required for WhatsApp webhook functionality
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id_here
WHATSAPP_ACCESS_TOKEN=your_permanent_access_token_here
WHATSAPP_VERIFY_TOKEN=choose_a_random_string_min_20_chars

# =============================================================================
# Database Configuration
# =============================================================================
# For local development (outside Docker):
# DATABASE_URL=postgresql://postgres:secret@localhost:5432/betting_db
#
# For Docker (automatically set by docker-compose.yml):
# DATABASE_URL is constructed from POSTGRES_* variables above
DATABASE_URL=postgresql://postgres:secret@postgres:5432/postgres

# =============================================================================
# Redis Configuration
# =============================================================================
# For local development (outside Docker):
# REDIS_URL=redis://localhost:6379/0
#
# For Docker (automatically set by docker-compose.yml):
# REDIS_URL=redis://redis:6379/0
REDIS_URL=redis://redis:6379/0

# =============================================================================
# Security Configuration
# =============================================================================
# Generate a secure secret key:
#   python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=generate_random_32_char_string_use_secrets_token_hex
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# Server Configuration
# =============================================================================
PORT=8000
ENVIRONMENT=production

# =============================================================================
# CORS Configuration
# =============================================================================
# For Docker deployment, set to your domain or use defaults
# Multiple origins can be comma-separated
CORS_ORIGINS=http://localhost:80,http://localhost:443,https://yourdomain.com

# =============================================================================
# Frontend Configuration (Admin Dashboard)
# =============================================================================
# API base URL for the admin dashboard
# For Docker: Use the nginx proxy URL or backend service name
# For local development: http://localhost:8000
VITE_API_BASE_URL=http://localhost:8000

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO

# =============================================================================
# Docker-Specific Notes
# =============================================================================
# 1. Database Initialization:
#    - The postgres container automatically runs Alembic migrations
#    - The initial admin user is created via scripts/docker-init-db.sh
#    - Admin credentials: admin@mykasibets.com / Password123@
#      (Change this in scripts/create_admin.py for production!)
#
# 2. Service Communication:
#    - Services communicate via Docker network using service names:
#      - Backend: kasi-backend
#      - Database: postgres
#      - Redis: redis
#      - Frontend: admin-dashboard
#      - Proxy: nginx
#
# 3. Port Mapping:
#    - Nginx: 80 (HTTP), 443 (HTTPS)
#    - Backend: 8000 (internal only)
#    - Postgres: 5432 (exposed for debugging)
#    - Redis: 6379 (exposed for debugging)
#
# 4. SSL/HTTPS:
#    - SSL certificates should be placed in nginx/ssl/
#    - Uncomment SSL configuration in nginx/nginx.conf
#    - Update NGINX_HTTPS_PORT if using non-standard port
#
# 5. Volumes:
#    - postgres_data: Persistent database storage
#    - redis_data: Persistent Redis storage
#    - ./logs: Backend application logs
#
# 6. Health Checks:
#    - All services have health checks configured
#    - Services wait for dependencies to be healthy before starting
#    - Check health: docker-compose ps
